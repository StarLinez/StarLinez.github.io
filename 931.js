"use strict";(self.webpackChunkRandomProject=self.webpackChunkRandomProject||[]).push([[931],{44931:(P,p,s)=>{s.r(p),s.d(p,{MaplestoryWeekliesV3Module:()=>S});var d=s(96814),u=s(15251);const l=JSON.parse('{"version":"9.3","imagePrefix":"MapleWeeklies/","taskGroups":[{"title":"Weekly Bosses","tasks":[{"name":"Chaos Pink Bean","image":"ChaosPinkBean.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Hard Hilla","image":"HardHilla.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Cygnus","image":"Cygnus.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Chaos Zakum","image":"ChaosZakum.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Princess No","image":"PrincessNo.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Chaos Crimson Queen","image":"ChaosCrimsonQueen.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Chaos Pierre","image":"ChaosPierre.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Chaos Von Bon","image":"ChaosVonBon.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Chaos Vellum","image":"ChaosVellum.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Akechi Mitsuhide","image":"AkechiMitsuhide.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Hard Magnus","image":"HardMagnus.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Chaos Papulatus","image":"ChaosPapulatus.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Lotus","image":"Lotus.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Damien","image":"Damien.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Guardian Angel Slime","image":"GuardianAngelSlime.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Lucid","image":"Lucid.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Will","image":"Will.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Gloom","image":"Gloom.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Verus Hilla","image":"VerusHilla.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Darknell","image":"Darknell.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Seren","image":"Seren.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Kaling","image":"Kaling.png","done":false,"enabled":true,"type":"default","dispCon":"true"}],"allDisabled":false},{"title":"Weekly Tasks","tasks":[{"name":"Guild Buff","image":"GuildBuff.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Scrapyard","image":"Scrapyard.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Dark World Tree","image":"Dark World Tree.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Mu Lung Dojo","image":"MuLungDojo.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Kritias","image":"Kritias.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Flag Race","image":"FlagRace.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Sharenian Culvert","image":"SharenianCulvert.png","done":false,"enabled":true,"type":"default","dispCon":"true"}],"allDisabled":false},{"title":"Arcane River Weeklies","tasks":[{"name":"Erda Spectrum","image":"ErdaSpectrum.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Hungry Muto","image":"HungryMuto.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Midnight Chaser","image":"MidnightChaser.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Spirit Saviour","image":"SpiritSaviour.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Ranheim Defense","image":"RanheimDefense.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Esfera Guardian","image":"EsferaGuardian.png","done":false,"enabled":true,"type":"default","dispCon":"true"}],"allDisabled":false}]}');var e=s(52425),m=s(6593),g=s(86456),h=s(91288),f=s(20140),k=s(70769),C=s(19830);function y(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"p"),e._uU(2,"The weeklies tracker has been updated!"),e._UZ(3,"br")(4,"br"),e._uU(5," No actual updates:"),e._UZ(6,"br"),e._uU(7," Removed the wongstaurant even dailies that were hidden anyway as the event is no longer ongoing."),e._UZ(8,"br")(9,"br"),e._uU(10," If you are experiencing issues press the reset button to reset your saved data, if everything is working you can press the dismiss button."),e._UZ(11,"br"),e._uU(12," If this does not resolve your issue please contact me on discord, my username is StarLines. "),e.qZA(),e.TgZ(13,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.infoReset())}),e._uU(14,"Reset Data"),e.qZA(),e.TgZ(15,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.infoDismiss())}),e._uU(16,"Dismiss"),e.qZA()()}}function _(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-task-topbar-default",9),e.NdJ("changeEvent",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeHandler())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("taskData",t.weekliesData)("topBarTitle","Weekly Tracker")("editButtonTitle","Weeklies")}}function v(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-task-topbar-editmode",10),e.NdJ("changeEvent",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeHandler())})("regionChangeEvent",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.regionChangeHandler())})("addCharacterEvent",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addCharacter())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("taskData",t.weekliesData)("topBarTitle","Weekly Tracker")("regions",t.regions)}}function D(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,' All weeklies are disabled, click on the "Edit Weeklies" button to enable weeklies. '),e.qZA())}function b(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-task-group",11),e.NdJ("changeEvent",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeHandler())}),e.qZA(),e.BQk()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.xp6(1),e.Q6J("taskData",a.weekliesData)("taskGroup",t)("title",t.title)("timerString",a.timerStrings[n])}}const w=[{path:"",component:(()=>{class i{constructor(t,n,a){this.titleService=t,this.metaService=n,this.taskService=a,this.initialisationComplete=!1,this.showInfo=!1,this.characterIndex=0,this.timers=[],this.timerStrings=["","",""],this.regions=[{resetUtcOffset:0,name:"GMS"},{resetUtcOffset:8,name:"MSEA"},{resetUtcOffset:9,name:"KMS"}]}ngOnInit(){this.titleService.setTitle("Maplestory Weeklies Tracker | Random Stuff"),this.metaService.updateTag({name:"description",content:"A weeklies tracker for Maplestory to keep track of your completed weekly tasks. Keep track of your weeklies across multiple different characters."}),this.metaService.getTag("name='robots'")?this.metaService.updateTag({name:"robots",content:"index, follow"}):this.metaService.addTag({name:"robots",content:"index, follow"}),this.initialise()}ngOnDestroy(){this.timers[0]&&clearInterval(this.timers[0]),this.timers[1]&&clearInterval(this.timers[1])}initialise(){localStorage.getItem("weekliesDataV3")?(this.weekliesData=JSON.parse(localStorage.getItem("weekliesDataV3")),void 0===this.weekliesData.mapleRegion&&(this.weekliesData.mapleRegion={resetUtcOffset:0,name:"GMS"}),this.weekliesData.editModeActive=!1,this.weeklyResetChecker(),this.updateChecker(),this.checkIfAllGroupsAreDisabled()):localStorage.getItem("weekliesData")?(this.weekliesData=this.taskService.v2v3Updater("weekliesData"),this.changeHandler(),this.initialise()):this.weekliesData=this.taskService.initiateDataSet(l,4),this.startTimer(0),this.startTimer(1),this.initialisationComplete=!0}weeklyResetChecker(){var t=this.calculateResetDayTime(4)-6048e5,n=this.calculateResetDayTime(1)-6048e5,a=parseInt(this.weekliesData.lastTrackerVisit);a<t&&this.taskService.resetCompletionIndex(this.weekliesData,0),a<n&&(this.taskService.resetCompletionIndex(this.weekliesData,1),this.taskService.resetCompletionIndex(this.weekliesData,2)),this.weekliesData.lastTrackerVisit=Date.now().toString(),this.changeHandler()}updateChecker(){this.weekliesData.version!=l.version&&(this.weekliesData=this.taskService.updateTaskStructure(this.weekliesData,l),this.changeHandler())}startTimer(t){var n;clearInterval(this.timers[t]),n=this.calculateResetDayTime(0==t?4:1),this.calculateAndOutPutTimes(n-(new Date).getTime(),t),this.timers[t]=setInterval(()=>{var a=n-(new Date).getTime();this.calculateAndOutPutTimes(a,t),a<0&&(clearInterval(this.timers[t]),this.liveReset(t))},1e3)}calculateResetDayTime(t){var n=new Date,a=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),0,0,0,0));a.setTime(a.getTime()+24*((7+t-a.getUTCDay()-1)%7+1)*60*60*1e3);var r=a.valueOf();return(r-=60*this.weekliesData.mapleRegion.resetUtcOffset*60*1e3)<n.getTime()&&(r+=6048e5),r}calculateAndOutPutTimes(t,n){if(t<0)return this.timerStrings[n]="RESET!",void(1==n&&(this.timerStrings[2]="RESET!"));var a=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),x=Math.floor(t%36e5/6e4),O=Math.floor(t%6e4/1e3);this.timerStrings[n]=a+"d "+r+"h "+x+"m "+("00"+O).slice(-2)+"s ",1==n&&(this.timerStrings[2]=this.timerStrings[n])}liveReset(t){this.taskService.resetCompletionIndex(this.weekliesData,t),1==t&&this.taskService.resetCompletionIndex(this.weekliesData,2),this.startTimer(t),this.weekliesData.lastTrackerVisit=(parseInt(Date.now().toString())+5e3).toString(),this.changeHandler()}checkIfAllGroupsAreDisabled(){this.allGroupsAreDisabled=!this.weekliesData.characters[this.weekliesData.selectedCharacterIndex].taskGroups.some(t=>!t.allDisabled)}addCharacter(){this.taskService.addCharacter(this.weekliesData,l),this.changeHandler()}infoReset(){localStorage.removeItem("weeklies"),localStorage.removeItem("weekliesData"),localStorage.removeItem("weekliesDataV3"),this.initialise(),this.weekliesData.infoVisible=!0}infoDismiss(){this.weekliesData.infoVisible=!1,this.changeHandler()}changeHandler(){localStorage.setItem("weekliesDataV3",JSON.stringify(this.weekliesData)),this.checkIfAllGroupsAreDisabled()}regionChangeHandler(){this.weeklyResetChecker(),this.startTimer(0),this.startTimer(1)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(m.Dx),e.Y36(m.h_),e.Y36(g.M))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-maplestory-weeklies-v3"]],decls:8,vars:5,consts:[["class","info",4,"ngIf"],[1,"gamePageContent"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent",4,"ngIf"],[3,"taskData","topBarTitle","regions","changeEvent","regionChangeEvent","addCharacterEvent",4,"ngIf"],[1,"dailyGroups"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"info"],[1,"buttonStyle",3,"click"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent"],[3,"taskData","topBarTitle","regions","changeEvent","regionChangeEvent","addCharacterEvent"],[3,"taskData","taskGroup","title","timerString","changeEvent"]],template:function(n,a){1&n&&(e._UZ(0,"app-maplestory-side-navigation"),e.YNc(1,y,17,0,"div",0),e.TgZ(2,"div",1),e.YNc(3,_,1,3,"app-task-topbar-default",2)(4,v,1,3,"app-task-topbar-editmode",3),e.TgZ(5,"div",4),e.YNc(6,D,2,0,"div",5)(7,b,2,4,"ng-container",6),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("ngIf",!a.initialisationComplete||a.weekliesData.infoVisible&&a.showInfo),e.xp6(2),e.Q6J("ngIf",!a.weekliesData.editModeActive),e.xp6(1),e.Q6J("ngIf",a.weekliesData.editModeActive),e.xp6(2),e.Q6J("ngIf",a.allGroupsAreDisabled&&!a.weekliesData.editModeActive),e.xp6(1),e.Q6J("ngForOf",a.weekliesData.characters[a.weekliesData.selectedCharacterIndex].taskGroups))},dependencies:[d.sg,d.O5,h.G,f.H,k.R,C.t],styles:[".gamePageContent[_ngcontent-%COMP%]{position:relative;padding-bottom:8px;margin-bottom:8px}.taskGroupWrapper[_ngcontent-%COMP%]{display:inline-block;margin:0 7px;vertical-align:top}.taskGroupTitle[_ngcontent-%COMP%]{margin:0;font-size:20px;width:262px}.disableMode[_ngcontent-%COMP%]{width:100px;height:50px}.dailyGroups[_ngcontent-%COMP%]{height:100%;max-width:552px;margin:0 auto;overflow:hidden;text-align:center}.buttonWrapper[_ngcontent-%COMP%]{width:175px;margin:0 auto}.buttonWrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.buttonWrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{float:left}.buttonWrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{float:right}.info[_ngcontent-%COMP%]{width:1130px;margin:8px auto;background-color:var(--game-page-background-color);border:1px solid var(--game-page-border-color);text-align:center}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:600px;text-align:center;margin:0 auto;padding-top:8px}.info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:8px}@media only screen and (max-width: 1635px){.info[_ngcontent-%COMP%]{float:left;margin:unset;margin-top:8px;margin-left:9px}}@media only screen and (max-width: 1391px){.info[_ngcontent-%COMP%]{width:calc(100% - 262px)}}@media only screen and (max-width: 800px){.info[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px;width:calc(100% - 18px)}}@media only screen and (max-width: 576px){.dailyGroups[_ngcontent-%COMP%]{max-width:276px}}"]})}return i})()}];let M=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#a=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(w),u.Bz]})}return i})();var T=s(32459),c=s(79001);let S=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#a=this.\u0275inj=e.cJS({imports:[d.ez,M,T.C,c.m,c.m]})}return i})()}}]);